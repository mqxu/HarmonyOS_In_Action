/*
 * Copyright (c) 2025 mqxu
 * Licensed under the MIT License.
 * See LICENSE file in the project root for full license information.
 */

import { hilog } from '@kit.PerformanceAnalysisKit';
import { Driver, ON } from '@ohos/UiTest';
import { describe, beforeAll, beforeEach, afterEach, afterAll, it, expect } from '@ohos/hypium';

export default function abilityTest() {
  describe('F001 Hello HarmonyOS UI æµ‹è¯•', () => {
    let driver: Driver;

    // æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å¼€å§‹å‰æ‰§è¡Œä¸€æ¬¡
    beforeAll(async () => {
      hilog.info(0x0000, 'AbilityTest', 'å¼€å§‹ UI æµ‹è¯•');
      // åˆ›å»º UI æµ‹è¯•é©±åŠ¨
      driver = Driver.create();
      await driver.delayMs(1000); // ç­‰å¾…åº”ç”¨å¯åŠ¨
    });

    // æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å¼€å§‹å‰æ‰§è¡Œ
    beforeEach(async () => {
      await driver.delayMs(500);
    });

    // æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ç»“æŸåæ‰§è¡Œ
    afterAll(() => {
      hilog.info(0x0000, 'AbilityTest', 'UI æµ‹è¯•å®Œæˆ');
    });

    // æµ‹è¯•åº”ç”¨å¯åŠ¨
    it('åº”ç”¨åº”è¯¥æˆåŠŸå¯åŠ¨å¹¶æ˜¾ç¤ºä¸»é¡µé¢', 0, async () => {
      // æŸ¥æ‰¾æ¬¢è¿æ–‡å­—
      const welcomeText = await driver.findComponent(ON.text('Hello HarmonyOS'));
      expect(await welcomeText.isEnabled()).assertTrue();
      hilog.info(0x0000, 'AbilityTest', 'ä¸»é¡µé¢æ˜¾ç¤ºæˆåŠŸ');
    });

    // æµ‹è¯•æ·±è‰²æ¨¡å¼åˆ‡æ¢
    it('åº”è¯¥èƒ½å¤Ÿåˆ‡æ¢æ·±è‰²æ¨¡å¼', 0, async () => {
      // æŸ¥æ‰¾æ·±è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’®
      const modeText = await driver.findComponent(ON.text('â˜€ï¸ æµ…è‰²æ¨¡å¼'));
      expect(await modeText.isEnabled()).assertTrue();
      hilog.info(0x0000, 'AbilityTest', 'æ·±è‰²æ¨¡å¼åˆ‡æ¢åŠŸèƒ½æ­£å¸¸');
    });

    // æµ‹è¯•è®¡æ•°åŠŸèƒ½
    it('åº”è¯¥èƒ½å¤Ÿæ˜¾ç¤ºè®¡æ•°ä¿¡æ¯', 0, async () => {
      // æŸ¥æ‰¾è®¡æ•°æ˜¾ç¤º
      const countText = await driver.findComponent(ON.text('å½“å‰è®¡æ•°: 0', ON.MatchPattern.CONTAINS));
      expect(await countText.isEnabled()).assertTrue();
      hilog.info(0x0000, 'AbilityTest', 'è®¡æ•°æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸');
    });

    // æµ‹è¯•æŒ‰é’®å­˜åœ¨æ€§
    it('åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰æ“ä½œæŒ‰é’®', 0, async () => {
      // æŸ¥æ‰¾å¢åŠ æŒ‰é’®
      const addButton = await driver.findComponent(ON.text('â•'));
      expect(await addButton.isEnabled()).assertTrue();

      // æŸ¥æ‰¾å‡å°‘æŒ‰é’®
      const minusButton = await driver.findComponent(ON.text('â–'));
      expect(await minusButton.isEnabled()).assertTrue();

      // æŸ¥æ‰¾é‡ç½®æŒ‰é’®
      const resetButton = await driver.findComponent(ON.text('ğŸ”„'));
      expect(await resetButton.isEnabled()).assertTrue();

      hilog.info(0x0000, 'AbilityTest', 'æ‰€æœ‰æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸');
    });

    // æµ‹è¯•è¾“å…¥æ¡†
    it('åº”è¯¥æ˜¾ç¤ºè‡ªå®šä¹‰æ¶ˆæ¯è¾“å…¥æ¡†', 0, async () => {
      // æŸ¥æ‰¾è¾“å…¥æ¡†
      const input = await driver.findComponent(ON.text('è¾“å…¥è‡ªå®šä¹‰æ¶ˆæ¯...'));
      expect(await input.isEnabled()).assertTrue();
      hilog.info(0x0000, 'AbilityTest', 'è¾“å…¥æ¡†æ˜¾ç¤ºæ­£å¸¸');
    });

    // æµ‹è¯•åŠŸèƒ½ç‰¹æ€§è¯´æ˜
    it('åº”è¯¥æ˜¾ç¤ºåŠŸèƒ½ç‰¹æ€§è¯´æ˜', 0, async () => {
      // æŸ¥æ‰¾åŠŸèƒ½ç‰¹æ€§æ ‡é¢˜
      const featureTitle = await driver.findComponent(ON.text('âœ¨ åŠŸèƒ½ç‰¹æ€§'));
      expect(await featureTitle.isEnabled()).assertTrue();

      // æŸ¥æ‰¾æ•°æ®æŒä¹…åŒ–è¯´æ˜
      const persistenceText = await driver.findComponent(ON.text('â€¢ æ•°æ®æŒä¹…åŒ–ï¼šè‡ªåŠ¨ä¿å­˜è®¡æ•°å’Œä¸»é¢˜'));
      expect(await persistenceText.isEnabled()).assertTrue();

      hilog.info(0x0000, 'AbilityTest', 'åŠŸèƒ½ç‰¹æ€§è¯´æ˜æ˜¾ç¤ºæ­£å¸¸');
    });

    // æµ‹è¯•ç‰ˆæœ¬ä¿¡æ¯
    it('åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯', 0, async () => {
      const versionText = await driver.findComponent(ON.text('HarmonyOS 6.0.0 (API 20)'));
      expect(await versionText.isEnabled()).assertTrue();
      hilog.info(0x0000, 'AbilityTest', 'ç‰ˆæœ¬ä¿¡æ¯æ˜¾ç¤ºæ­£å¸¸');
    });
  });
}