import { UserCard } from '../components/UserCard';
import { User } from '../models/User';
import hilog from '@ohos.hilog';

@Entry
@Component
struct CustomComponentPage {
  @State currentUser: User = new User(
    1,
    'èµµå…­',
    'ğŸ‘¨â€ğŸ’¼',
    'äº§å“ç»ç†',
    'å…³æ³¨ç”¨æˆ·éœ€æ±‚ï¼Œæ‰“é€ æè‡´äº§å“ä½“éªŒ'
  );
  @State cardWidth: number = 300;
  @State showActions: boolean = true;

  /**
   * è¿”å›ä¸Šä¸€é¡µ
   */
  private goBack(): void {
    this.getUIContext().getRouter().back();
  }

  build() {
    Column() {
      // å¯¼èˆªæ 
      Row() {
        Text('â†')
          .fontSize(24)
          .fontColor($r('app.color.text_primary'))
          .onClick(() => {
            this.goBack()
          })

        Text('@Component è‡ªå®šä¹‰ç»„ä»¶')
          .fontSize(18)
          .fontWeight(FontWeight.Bold)
          .fontColor($r('app.color.text_primary'))
          .margin({ left: 12 })
      }
      .width('100%')
      .height(56)
      .padding({ left: 16, right: 16 })
      .backgroundColor($r('app.color.bg_primary'))

      Scroll() {
        Column({ space: 24 }) {
          // è¯´æ˜
          Column({ space: 8 }) {
            Text('@Component è£…é¥°å™¨è¯´æ˜')
              .fontSize(16)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Text('@Component ç”¨äºåˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œå¯ä»¥å°è£…UIç»“æ„å’Œä¸šåŠ¡é€»è¾‘ï¼Œå®ç°ä»£ç å¤ç”¨ã€‚')
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))
              .lineHeight(22)

            Text('æ ¸å¿ƒç‰¹æ€§ï¼š')
              .fontSize(14)
              .fontWeight(FontWeight.Medium)
              .fontColor($r('app.color.text_primary'))
              .margin({ top: 8 })

            Column({ space: 4 }) {
              this.FeatureItem('1. ä½¿ç”¨ @Prop æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®')
              this.FeatureItem('2. æ”¯æŒå±æ€§çš„é»˜è®¤å€¼è®¾ç½®')
              this.FeatureItem('3. å¯ä»¥åŒ…å«çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸ')
              this.FeatureItem('4. å®Œå…¨æ”¯æŒ ArkTS çš„æ‰€æœ‰ç‰¹æ€§')
            }
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_primary'))
          .borderRadius(8)

          // å®æ—¶é¢„è§ˆ
          Column({ space: 12 }) {
            Text('å®æ—¶é¢„è§ˆ')
              .fontSize(16)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            UserCard({
              user: this.currentUser,
              cardWidth: this.cardWidth,
              showActions: this.showActions
            })
          }
          .width('100%')

          // æ§åˆ¶é¢æ¿
          Column({ space: 16 }) {
            Text('å±æ€§æ§åˆ¶')
              .fontSize(16)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            // å¡ç‰‡å®½åº¦
            Column({ space: 8 }) {
              Row() {
                Text('å¡ç‰‡å®½åº¦')
                  .fontSize(14)
                  .fontColor($r('app.color.text_secondary'))
                Blank()
                Text(`${this.cardWidth}px`)
                  .fontSize(14)
                  .fontColor($r('app.color.brand_primary'))
              }
              .width('100%')

              Slider({
                value: this.cardWidth,
                min: 200,
                max: 400,
                step: 10
              })
                .blockColor($r('app.color.brand_primary'))
                .trackColor($r('app.color.bg_secondary'))
                .selectedColor($r('app.color.brand_primary'))
                .onChange((value: number) => {
                  this.cardWidth = value;
                })
            }

            // æ˜¾ç¤ºæ“ä½œæŒ‰é’®
            Row() {
              Text('æ˜¾ç¤ºæ“ä½œæŒ‰é’®')
                .fontSize(14)
                .fontColor($r('app.color.text_secondary'))
              Blank()
              Toggle({ type: ToggleType.Switch, isOn: this.showActions })
                .selectedColor($r('app.color.brand_primary'))
                .onChange((isOn: boolean) => {
                  this.showActions = isOn;
                })
            }
            .width('100%')

            // æ›´æ”¹ç”¨æˆ·æ•°æ®
            Button('åˆ‡æ¢ç”¨æˆ·æ•°æ®')
              .width('100%')
              .backgroundColor($r('app.color.brand_primary'))
              .onClick(() => {
                const users: User[] = [
                  new User(1, 'å¼ ä¸‰', 'ğŸ‘¨â€ğŸ’»', 'HarmonyOS å¼€å‘å·¥ç¨‹å¸ˆ', 'ä¸“æ³¨äºé¸¿è’™åº”ç”¨å¼€å‘ï¼Œåˆ†äº«æŠ€æœ¯å¿ƒå¾—'),
                  new User(2, 'æå››', 'ğŸ‘©â€ğŸ¨', 'UI/UX è®¾è®¡å¸ˆ', 'çƒ­çˆ±è®¾è®¡ï¼Œè¿½æ±‚æè‡´ç”¨æˆ·ä½“éªŒ'),
                  new User(3, 'ç‹äº”', 'ğŸ‘¨â€ğŸ«', 'æŠ€æœ¯è®²å¸ˆ', 'è‡´åŠ›äºé¸¿è’™æŠ€æœ¯æ¨å¹¿å’Œæ•™è‚²'),
                  new User(4, 'èµµå…­', 'ğŸ‘¨â€ğŸ’¼', 'äº§å“ç»ç†', 'å…³æ³¨ç”¨æˆ·éœ€æ±‚ï¼Œæ‰“é€ æè‡´äº§å“ä½“éªŒ')
                ];
                const randomIndex: number = Math.floor(Math.random() * users.length);
                this.currentUser = users[randomIndex];
              })
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_primary'))
          .borderRadius(8)

          // ä»£ç ç¤ºä¾‹
          Column({ space: 8 }) {
            Text('ä»£ç ç¤ºä¾‹')
              .fontSize(16)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Text(`// ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶\nUserCard({\n  user: user,\n  cardWidth: 300,\n  showActions: true\n})`)
              .fontSize(12)
              .fontFamily('monospace')
              .fontColor($r('app.color.text_secondary'))
              .padding(12)
              .backgroundColor($r('app.color.bg_secondary'))
              .borderRadius(4)
              .width('100%')
          }
          .width('100%')
        }
        .padding(16)
      }
      .layoutWeight(1)
      .backgroundColor($r('app.color.bg_secondary'))
    }
    .width('100%')
    .height('100%')
  }

  @Builder
  FeatureItem(text: string) {
    Row({ space: 8 }) {
      Text('â€¢')
        .fontSize(14)
        .fontColor($r('app.color.brand_primary'))
      Text(text)
        .fontSize(13)
        .fontColor($r('app.color.text_secondary'))
    }
  }
}
