import { hilog } from '@kit.PerformanceAnalysisKit';

@Entry
@Component
struct GestureGroupPage {
  @State parallelInfo: string = 'åŒæ—¶è¯†åˆ«åŒºåŸŸ';
  @State exclusiveInfo: string = 'äº’æ–¥è¯†åˆ«åŒºåŸŸ';
  @State sequentialInfo: string = 'é¡ºåºè¯†åˆ«åŒºåŸŸ';
  @State sequentialStep: number = 0;

  private goBack(): void {
    this.getUIContext().getRouter().back();
  }

  build() {
    Column() {
      // é¡¶éƒ¨å¯¼èˆª
      Row() {
        Button('è¿”å›')
          .onClick(() => this.goBack())
          .backgroundColor($r('app.color.brand_primary'))

        Text('æ‰‹åŠ¿ç»„åˆ')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor($r('app.color.text_primary'))
          .layoutWeight(1)
          .textAlign(TextAlign.Center)

        Button('è¿”å›')
          .visibility(Visibility.Hidden)
      }
      .width('100%')
      .padding(16)
      .backgroundColor($r('app.color.bg_primary'))

      Scroll() {
        Column({ space: 24 }) {
          // å¹¶è¡Œè¯†åˆ« - GestureMode.Parallel
          Column({ space: 12 }) {
            Text('1. å¹¶è¡Œè¯†åˆ« (Parallel)')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Text('å¯ä»¥åŒæ—¶è§¦å‘å•å‡»å’Œé•¿æŒ‰')
              .fontSize(12)
              .fontColor($r('app.color.text_tertiary'))

            Text(this.parallelInfo)
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Column() {
              Text('å•å‡»æˆ–é•¿æŒ‰')
                .fontSize(16)
                .fontColor($r('app.color.text_primary'))
            }
            .width('100%')
            .height(120)
            .backgroundColor($r('app.color.bg_hover'))
            .borderRadius(8)
            .justifyContent(FlexAlign.Center)
            .gesture(
              GestureGroup(GestureMode.Parallel,
                TapGesture()
                  .onAction(() => {
                    this.parallelInfo = 'å•å‡»è§¦å‘';
                    hilog.info(0x0000, 'F005', 'å¹¶è¡Œ: å•å‡»');
                  }),
                LongPressGesture({ duration: 500 })
                  .onAction(() => {
                    this.parallelInfo = 'é•¿æŒ‰è§¦å‘';
                    hilog.info(0x0000, 'F005', 'å¹¶è¡Œ: é•¿æŒ‰');
                  })
              )
            )
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_primary'))
          .borderRadius(12)
          .alignItems(HorizontalAlign.Start)

          // äº’æ–¥è¯†åˆ« - GestureMode.Exclusive
          Column({ space: 12 }) {
            Text('2. äº’æ–¥è¯†åˆ« (Exclusive)')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Text('åªèƒ½è§¦å‘ä¸€ä¸ªæ‰‹åŠ¿ï¼Œå…ˆè¯†åˆ«åˆ°çš„ä¼˜å…ˆ')
              .fontSize(12)
              .fontColor($r('app.color.text_tertiary'))

            Text(this.exclusiveInfo)
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Column() {
              Text('å•å‡»æˆ–é•¿æŒ‰')
                .fontSize(16)
                .fontColor($r('app.color.text_primary'))
            }
            .width('100%')
            .height(120)
            .backgroundColor($r('app.color.bg_hover'))
            .borderRadius(8)
            .justifyContent(FlexAlign.Center)
            .gesture(
              GestureGroup(GestureMode.Exclusive,
                TapGesture()
                  .onAction(() => {
                    this.exclusiveInfo = 'å•å‡»è§¦å‘ï¼ˆäº’æ–¥ï¼‰';
                    hilog.info(0x0000, 'F005', 'äº’æ–¥: å•å‡»');
                  }),
                LongPressGesture({ duration: 500 })
                  .onAction(() => {
                    this.exclusiveInfo = 'é•¿æŒ‰è§¦å‘ï¼ˆäº’æ–¥ï¼‰';
                    hilog.info(0x0000, 'F005', 'äº’æ–¥: é•¿æŒ‰');
                  })
              )
            )
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_primary'))
          .borderRadius(12)
          .alignItems(HorizontalAlign.Start)

          // é¡ºåºè¯†åˆ« - GestureMode.Sequence
          Column({ space: 12 }) {
            Text('3. é¡ºåºè¯†åˆ« (Sequence)')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Text('å¿…é¡»æŒ‰é¡ºåºå®Œæˆ: å…ˆé•¿æŒ‰ â†’ å†å•å‡»')
              .fontSize(12)
              .fontColor($r('app.color.text_tertiary'))

            Text(this.sequentialInfo)
              .fontSize(14)
              .fontColor($r('app.color.text_secondary'))

            Text(`æ­¥éª¤: ${this.sequentialStep}/2`)
              .fontSize(12)
              .fontColor($r('app.color.text_tertiary'))

            Column() {
              Text('å…ˆé•¿æŒ‰ï¼Œå†å•å‡»')
                .fontSize(16)
                .fontColor($r('app.color.text_primary'))
            }
            .width('100%')
            .height(120)
            .backgroundColor($r('app.color.bg_hover'))
            .borderRadius(8)
            .justifyContent(FlexAlign.Center)
            .gesture(
              GestureGroup(GestureMode.Sequence,
                LongPressGesture({ duration: 500 })
                  .onAction(() => {
                    this.sequentialStep = 1;
                    this.sequentialInfo = 'æ­¥éª¤1: é•¿æŒ‰å®Œæˆï¼Œè¯·å•å‡»';
                    hilog.info(0x0000, 'F005', 'é¡ºåº: é•¿æŒ‰å®Œæˆ');
                  }),
                TapGesture()
                  .onAction(() => {
                    if (this.sequentialStep === 1) {
                      this.sequentialStep = 2;
                      this.sequentialInfo = 'æ­¥éª¤2: å•å‡»å®Œæˆï¼Œå…¨éƒ¨å®Œæˆï¼';
                      hilog.info(0x0000, 'F005', 'é¡ºåº: å•å‡»å®Œæˆ');
                    }
                  })
              )
            )

            Button('é‡ç½®é¡ºåº')
              .width('100%')
              .backgroundColor($r('app.color.brand_success'))
              .onClick(() => {
                this.sequentialStep = 0;
                this.sequentialInfo = 'å·²é‡ç½®ï¼Œè¯·é‡æ–°å¼€å§‹';
              })
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_primary'))
          .borderRadius(12)
          .alignItems(HorizontalAlign.Start)

          // ç»„åˆç¤ºä¾‹è¯´æ˜
          Column({ space: 12 }) {
            Text('ğŸ“Œ æ‰‹åŠ¿ç»„åˆè¯´æ˜')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .fontColor($r('app.color.text_primary'))

            Column({ space: 8 }) {
              Text('â€¢ Parallel (å¹¶è¡Œ): æ‰€æœ‰æ‰‹åŠ¿åŒæ—¶è¯†åˆ«ï¼Œå¯ä»¥åŒæ—¶è§¦å‘')
                .fontSize(14)
                .fontColor($r('app.color.text_secondary'))

              Text('â€¢ Exclusive (äº’æ–¥): åªèƒ½è§¦å‘ä¸€ä¸ªï¼Œä¼˜å…ˆçº§ç”±å£°æ˜é¡ºåºå†³å®š')
                .fontSize(14)
                .fontColor($r('app.color.text_secondary'))

              Text('â€¢ Sequence (é¡ºåº): å¿…é¡»æŒ‰å£°æ˜é¡ºåºä¾æ¬¡å®Œæˆæ‰€æœ‰æ‰‹åŠ¿')
                .fontSize(14)
                .fontColor($r('app.color.text_secondary'))
            }
            .width('100%')
            .alignItems(HorizontalAlign.Start)
          }
          .width('100%')
          .padding(16)
          .backgroundColor($r('app.color.bg_secondary'))
          .borderRadius(12)
          .alignItems(HorizontalAlign.Start)
        }
        .width('100%')
        .padding(16)
      }
      .layoutWeight(1)
    }
    .width('100%')
    .height('100%')
    .backgroundColor($r('app.color.bg_page'))
  }
}
